\section{SolarThermal Klasse}
Die \texttt{SolarThermal}-Klasse modelliert ein solarthermisches System und enthält Methoden zur Berechnung der Leistung, der wirtschaftlichen Kennzahlen und der Umweltauswirkungen. Die Klasse unterstützt verschiedene Arten von Sonnenkollektoren (z. B. Flachkollektoren und Vakuumröhrenkollektoren) und enthält Parameter für die Integration eines Speichersystems.

\subsection{Attribute}
\begin{itemize}
    \item \texttt{name (str)}: Name der Solarthermieanlage.
    \item \texttt{bruttofläche\_STA (float)}: Brutto-Kollektorfläche der Solarthermieanlage in Quadratmetern.
    \item \texttt{vs (float)}: Volumen des Speichersystems in Kubikmetern.
    \item \texttt{Typ (str)}: Typ des Sonnenkollektors, z.B. "Flachkollektor" oder "Vakuumröhrenkollektor".
    \item \texttt{kosten\_speicher\_spez (float)}: Spezifische Kosten für das Speichersystem in €/m³.
    \item \texttt{kosten\_fk\_spez (float)}: Spezifische Kosten für Flachkollektoren in €/m².
    \item \texttt{kosten\_vrk\_spez (float)}: Spezifische Kosten für Vakuumröhrenkollektoren in €/m².
    \item \texttt{Tsmax (float)}: Maximale Speichertemperatur in Grad Celsius.
    \item \texttt{Longitude (float)}: Längengrad des Installationsortes.
    \item \texttt{STD\_Longitude (float)}: Standardlängengrad der Zeitzone.
    \item \texttt{Latitude (float)}: Breitengrad des Installationsortes.
    \item \texttt{East\_West\_collector\_azimuth\_angle (float)}: Azimutwinkel des Sonnenkollektors in Grad.
    \item \texttt{Collector\_tilt\_angle (float)}: Neigungswinkel des Sonnenkollektors in Grad.
    \item \texttt{Tm\_rl (float)}: Mittlere Rücklauftemperatur in Grad Celsius.
    \item \texttt{Qsa (float)}: Anfangsleistung.
    \item \texttt{Vorwärmung\_K (float)}: Vorwärmung in Kelvin.
    \item \texttt{DT\_WT\_Solar\_K (float)}: Temperaturdifferenz über den Solar-Wärmetauscher in Kelvin.
    \item \texttt{DT\_WT\_Netz\_K (float)}: Temperaturdifferenz über den Netz-Wärmetauscher in Kelvin.
    \item \texttt{opt\_volume\_min (float)}: Minimales Optimierungsvolumen in Kubikmetern.
    \item \texttt{opt\_volume\_max (float)}: Maximales Optimierungsvolumen in Kubikmetern.
    \item \texttt{opt\_area\_min (float)}: Minimale Optimierungsfläche in Quadratmetern.
    \item \texttt{opt\_area\_max (float)}: Maximale Optimierungsfläche in Quadratmetern.
    \item \texttt{kosten\_pro\_typ (dict)}: Wörterbuch, das die spezifischen Kosten für verschiedene Arten von Sonnenkollektoren enthält.
    \item \texttt{Kosten\_STA\_spez (float)}: Spezifische Kosten für die Solarthermieanlage in €/m².
    \item \texttt{Nutzungsdauer (int)}: Lebensdauer der Solarthermieanlage in Jahren (Standardwert: 20 Jahre).
    \item \texttt{f\_Inst (float)}: Installationsfaktor.
    \item \texttt{f\_W\_Insp (float)}: Wartungs- und Inspektionsfaktor.
    \item \texttt{Bedienaufwand (float)}: Betriebsaufwand für das System.
    \item \texttt{Anteil\_Förderung\_BEW (float)}: Fördersatz für das Erneuerbare-Energien-Gesetz.
    \item \texttt{Betriebskostenförderung\_BEW (float)}: Betriebskostenzuschuss pro MWh thermischer Energie.
    \item \texttt{co2\_factor\_solar (float)}: CO$_2$-Faktor für Solarenergie (typisch 0 für Solarwärme).
    \item \texttt{primärenergiefaktor (float)}: Primärenergiefaktor (typisch 0 für Solarthermie).
\end{itemize}

\subsection{Methoden}
\begin{itemize}
    \item \texttt{calc\_WGK(q, r, T, BEW, stundensatz)}: Berechnet die gewichteten Durchschnittskosten der Wärmeerzeugung (WGK) basierend auf den Investitions- und Betriebskosten des Systems sowie auf der Förderfähigkeit nach dem EEG.
    \begin{itemize}
        \item \textbf{q (float)}: Kapitalrückgewinnungsfaktor.
        \item \textbf{r (float)}: Preissteigerungsfaktor.
        \item \textbf{T (int)}: Betrachtungszeitraum in Jahren.
        \item \textbf{BEW (str)}: Angabe der Förderfähigkeit nach EEG ("Ja" oder "Nein").
        \item \textbf{stundensatz (float)}: Stundensatz für Arbeitsaufwand.
    \end{itemize}
    Gibt die WGK des Systems basierend auf Investitionen, Förderungen und Betriebskosten zurück.

    \item \texttt{calculate(VLT\_L, RLT\_L, TRY, time\_steps, calc1, calc2, q, r, T, BEW, stundensatz, duration, general\_results)}: 
    Simuliert die Leistung des solarthermischen Systems über einen bestimmten Zeitraum und berücksichtigt dabei Vorlauf- und Rücklauftemperaturen, Wetterdaten und Betriebskosten.
    \begin{itemize}
        \item \textbf{VLT\_L (array)}: Array von Vorlauftemperaturen in Grad Celsius.
        \item \textbf{RLT\_L (array)}: Array von Rücklauftemperaturen in Grad Celsius.
        \item \textbf{TRY (array)}: Testreferenzjahr-Wetterdaten.
        \item \textbf{time\_steps (array)}: Array von Zeitschritten für die Simulation.
        \item \textbf{calc1 (float)}, \textbf{calc2 (float)}: Zusätzliche Berechnungsparameter.
        \item \textbf{q (float)}, \textbf{r (float)}, \textbf{T (int)}, \textbf{BEW (str)}, \textbf{stundensatz (float)}: Parameter für die Kostenberechnung.
        \item \textbf{duration (float)}: Dauer jedes Simulationszeitschritts.
        \item \textbf{general\_results (dict)}: Wörterbuch, das allgemeine Ergebnisse aus der Simulation enthält, wie z.B. Restlasten.
    \end{itemize}
    Gibt ein Wörterbuch mit den Ergebnissen der Simulation zurück, einschließlich Wärmeerzeugung, spezifischen CO$_2$-Emissionen, Primärenergieverbrauch und Speicherstatus.

    \item \texttt{to\_dict()}: Wandelt das \texttt{SolarThermal}-Objekt in ein Wörterbuch um, um eine einfache Serialisierung und Speicherung zu ermöglichen.
    
    \item \texttt{from\_dict(data)}: Erstellt ein \texttt{SolarThermal}-Objekt aus einem Wörterbuch von Attributen.
\end{itemize}

\subsection{Wirtschaftliche und ökologische Überlegungen}
Die \texttt{SolarThermal}-Klasse enthält Methoden zur Berechnung der \textbf{gewichteten Durchschnittskosten der Wärmeerzeugung (WGK)}, die die Installationskosten, Betriebskosten und Förderungen gemäß EEG berücksichtigt. Die spezifischen CO$_2$-Emissionen des Systems werden als Emissionen pro erzeugter Wärmeeinheit berechnet, und der \textbf{Primärenergieverbrauch} wird basierend auf der Wärmeerzeugung des Systems ermittelt.

\subsection{Nutzungsbeispiel}
Diese Klasse ist anpassungsfähig für verschiedene solarthermische Konfigurationen. Das folgende Beispiel zeigt, wie die Klasse initialisiert und verwendet werden kann:

\begin{verbatim}
solar_system = SolarThermal(
    name="SolarThermie-Anlage",
    bruttofläche_STA=500,  # m²
    vs=50,  # m³ Speicher
    Typ="Flachkollektor",
    Tsmax=90, 
    Longitude=-14.42, 
    STD_Longitude=-15, 
    Latitude=51.17, 
    East_West_collector_azimuth_angle=0, 
    Collector_tilt_angle=36
)
results = solar_system.calculate(
    VLT_L=temperature_forward, 
    RLT_L=temperature_return, 
    TRY=weather_data, 
    time_steps=steps, 
    calc1=0.8, calc2=1.2, 
    q=0.03, r=0.02, T=20, BEW="Ja", 
    stundensatz=50, 
    duration=1, 
    general_results=load_profile
)
\end{verbatim}
In diesem Beispiel wird eine Solarthermieanlage mit Flachkollektoren auf einer Fläche von 500 m² und einem Speichervolumen von 50 m³ simuliert. Die Leistungs- und Kostenkennzahlen werden basierend auf den bereitgestellten Eingabedaten berechnet.

%\input{../solar_thermal_doc/solar_thermal_doc.tex}